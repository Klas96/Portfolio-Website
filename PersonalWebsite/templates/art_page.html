{% extends "head_foot.html" %}
{% block content %}
<body class="art-page">
  <section>
    <div class="innerPageBannerCol">
      <div class="container">
        <div class="row g-4 g-md-3  align-items-center">
          <div class="col-md-6">
            <div class="bannerContent">
              <h1 class="pb-md-3 xlTitle">Art</h1>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section>
    <div class="lightBg">
      <div class="container">
        <div class="portfolioContentMain">
          <div class="row g-4 g-md-4 g-lg-5 portfolioRow">
            {% for art_project in art_projects reversed %}
            <div class="col-md-4 pColMain">
              <div class="pCol" style="position: relative; width: 100%; padding-top: 100%;">
                <a onclick="enlargeImage('{{art_project.image.url}}', '{{art_project.title}}')" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0;">
                  <img src="{{art_project.image.url}}" alt="{{art_project.title}}" class="pImg" style="width: 100%; height: 100%; object-fit: cover;" onload="freezeGif(this)">
                </a>
              </div>
            </div>
            
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    <canvas id=shader1></canvas>
  </section>
</body>

{% load static %}
<script src="{% static 'js/shader/first.js' %}"></script>
<script>
function freezeGif(img) {
    if (img.src.endsWith('.gif')) {
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        const gif = new Image();
        gif.src = img.src;
        gif.onload = function() {
            const aspectRatio = gif.width / gif.height;
            canvas.width = gif.width;
            canvas.height = gif.height;
            context.drawImage(gif, 0, 0, gif.width, gif.height);
            // Set canvas styles to match the image
            canvas.style.position = 'absolute';
            canvas.style.top = '0';
            canvas.style.left = '0';
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            canvas.style.objectFit = 'cover';
            img.parentNode.replaceChild(canvas, img);
        };
    }
}
</script>
{% endblock %}
